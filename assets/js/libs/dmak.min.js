/* 
 * Draw Me A Kanji - v0.3.1
 * A funny drawer for your Japanese writings
 * http://drawmeakanji.com
 * 
 * Made by Matthieu Bilbille
 * Under MIT License
 */
!function(){"use strict";function a(a,b){var c,d,e,f,g=[];for(e=0;ed;d++)c=new Raphael(b.element,b.width+"px",b.height+"px"),c.setViewBox(b.viewBox.x,b.viewBox.y,b.viewBox.w,b.viewBox.h),c.canvas.setAttribute("class","dmak-svg"),e.push(c);return e.reverse()}function c(a,b){var c;for(c=0;c0?a.length:0,a.object.path.node.getBoundingClientRect(),a.object.path.node.style.transition=a.object.path.node.style.WebkitTransition="stroke-dashoffset "+a.duration+"ms ease",a.object.path.node.style.strokeDashoffset=b>0?"0":a.length,setTimeout(d,a.duration)}function h(a){if(null===a||"object"!=typeof a)return a;var b=a.constructor();for(var c in a)b[c]=h(a[c]);return b}function i(a,b){if(2!==arguments.length)throw new Error("Missing arguments in assign function");for(var c in a)b.hasOwnProperty(c)&&(a[c]="object"==typeof b[c]?i(a[c],b[c]):b[c]);return a}var j=function(a,b){if(this.text=a,this.options=i(h(j["default"]),b),this.strokes=[],this.papers=[],this.pointer=0,this.timeouts={play:[],erasing:[],drawing:[]},!this.options.skipLoad){var c=new DmakLoader(this.options.uri),d=this;c.load(a,function(a){d.prepare(a),d.options.loaded(d.strokes),d.options.autoplay&&d.render()})}};j.VERSION="0.2.0",j["default"]={uri:"",skipLoad:!1,autoplay:!0,height:109,width:109,viewBox:{x:0,y:0,w:109,h:109},step:.03,element:"draw",stroke:{animated:{drawing:!0,erasing:!0},order:{visible:!1,attr:{"font-size":"8",fill:"#999999"}},attr:{active:"#BF0000",stroke:"#2C2C2C","stroke-width":4,"stroke-linecap":"round","stroke-linejoin":"round"}},grid:{show:!0,attr:{stroke:"#CCCCCC","stroke-width":.5,"stroke-dasharray":"--"}},loaded:function(){},erased:function(){},drew:function(){}},j.fn=j.prototype={prepare:function(d){this.strokes=a(d,this.options),this.papers=b(d.length,this.options),this.options.grid.show&&c(this.papers,this.options)},erase:function(a){if(this.timeouts.play.length)return!1;if(this.pointer<=0)return!1;"undefined"==typeof a&&(a=0);do this.pointer--,d(this.strokes[this.pointer],this.timeouts.erasing,this.options),this.options.erased(this.pointer);while(this.pointer>a)},render:function(a){if(this.timeouts.play.length)return!1;if("undefined"==typeof a)a=this.strokes.length;else if(a>this.strokes.length)return!1;var b,c=function(a){e(a.papers[a.strokes[a.pointer]["char"]],a.strokes[a.pointer],a.timeouts.drawing,a.options),a.options.drew(a.pointer),a.pointer++,a.timeouts.play.shift()},d=0;for(b=0;bb;b++)!this.options.stroke.animated.drawing||0>=d?c(this):this.timeouts.play.push(setTimeout(c,d,this)),d+=this.strokes[b].duration},pause:function(){for(var a=0;ad;d++)a(this.uri,d,b.charCodeAt(d).toString(16),h)},window.DmakLoader=c}();
